Fix various errors during migration stemming from optimizations that result in
catalog inconsistency by removing those optimizations.

Add support for migrating marker interfaces.